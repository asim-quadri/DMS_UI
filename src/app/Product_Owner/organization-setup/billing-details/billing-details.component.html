<div class="main-container">
  <div class="home-content user-table product-setup">
    <div class="row mt-20">
      <div class="col-4 billing-details">
        <app-organization-verticalnav></app-organization-verticalnav>
      </div>
      <div class="col-8">
        <div class="product-panel">
          <div class="product-panel-header text-center">
            <div class="row">
              <div class="col-4 mb-1">
                <span>{{ this.organization.organizationName }}</span>
              </div>
              <div class="col-4">
                <h4>Add Billing Details</h4>
              </div>
              <div class="col-4 mb-1" *ngIf="this.entityId > 0">
                <span>{{ this.entity.entityName }}</span>
              </div>
            </div>
          </div>
          <div class="product-panel-body new-regulation text-center">
            <div class="row mt-20 justify-content-center">
              <div class="col-11 organization-tabs">
                <nav
                  ngbNav
                  #nav="ngbNav"
                  class="nav-tabs justify-content-center billing-sub-nav"
                  (navChange)="onTabChange($event)"
                >
                  <ng-container [ngbNavItem]="1" ngbNavItem>
                    <a
                      ngbNavLink
                      [ngClass]="{ 'new-class': isSecondTabVisited }"
                      >Basic Details</a
                    >
                    <ng-template ngbNavContent>
                      <div class="row justify-content-center">
                        <div class="col-12">
                          <ul class="billing-level">
                            <li>
                              Billing level :
                              <span>{{ this.organization.billingLevel }}</span>
                            </li>
                          </ul>
                        </div>
                      </div>

                      <div class="clearfix"></div>
                      <form #basic="ngForm" [formGroup]="formgroup">
                        <div class="row mt-20">
                          <div class="col-4 text-start">
                            <label for="">PAN Number</label>
                            <app-input-text
                              [formGroup]="formgroup"
                              [name]="'pAN'"
                              [placeholder]="'Enter PAN No.'"
                            ></app-input-text>
                          </div>
                          <div class="col-4 text-start">
                            <label for="">TAN Number</label>
                            <app-input-text
                              [formGroup]="formgroup"
                              [name]="'tAN'"
                              [placeholder]="'Enter TAN No.'"
                            ></app-input-text>
                          </div>
                          <div class="col-4 text-start">
                            <label for="">GST Number</label>
                            <app-input-text
                              [formGroup]="formgroup"
                              [name]="'gSTNo'"
                              [placeholder]="'Enter GST No.'"
                            ></app-input-text>
                          </div>
                        </div>
                        <div class="row mt-20">
                          <div class="col-6 text-start">
                            <label class="checkbox-label">
                              <input
                                type="checkbox"
                                class="input-checkbox"
                                formControlName="sameaddress"
                                (change)="onAddressCheckboxChange($event)"
                              />
                              Address Same as Organization/Entity
                            </label>
                          </div>
                        </div>
                        <div class="row mt-20 justify-content-center">
                          <div class="col-12">
                            <div class="bg-white address">
                              <div class="row mt-15 justify-content-center">
                                <div class="col-4 text-start">
                                  <label for="Organization Name">Country</label>
                                  <app-input-dropdown
                                    [formGroup]="formgroup"
                                    [name]="'countryId'"
                                    [object]="this.countries"
                                    [key]="'countryName'"
                                    [value]="'id'"
                                    (change)="onCountryChange($event)"
                                  >
                                  </app-input-dropdown>
                                </div>
                                <div class="col-4 text-start">
                                  <label for="Organization Name">State</label>
                                  <app-input-dropdown
                                    [formGroup]="formgroup"
                                    [name]="'stateId'"
                                    [object]="this.stateList"
                                    [key]="'stateName'"
                                    [value]="'id'"
                                  >
                                  </app-input-dropdown>
                                </div>
                                <div class="col-4 text-start">
                                  <label for="Organization Name">City</label>
                                  <app-input-text
                                    [formGroup]="formgroup"
                                    [name]="'city'"
                                    [placeholder]="'Enter City'"
                                  ></app-input-text>
                                </div>
                              </div>
                              <div class="row mt-20">
                                <div class="col-4 text-start">
                                  <label for="Organization Name">PIN</label>
                                  <app-input-text
                                    [formGroup]="formgroup"
                                    [name]="'pIN'"
                                    [placeholder]="'Enter PIN'"
                                  ></app-input-text>
                                </div>
                              </div>
                              <div class="row mt-20 justify-content-center">
                                <div class="col-12 text-start">
                                  <label for="address">Address</label>
                                  <textarea
                                    class="form-control text-start h-75"
                                    placeholder="Add Address Here"
                                    formControlName="address"
                                    required
                                  ></textarea>
                                </div>
                              </div>
                              <div class="clearfix"></div>
                            </div>
                          </div>
                        </div>
                        <div class="row mt-15 mt-4 justify-content-center">
                          <div class="col-3">
                            <button
                              class="btn btn-save btn-primary"
                              [disabled]="active === 2"
                              (click)="nav.select(2); onTabChangeNav(2)"
                            >
                              Next >>
                            </button>
                          </div>
                        </div>
                      </form>
                    </ng-template>
                  </ng-container>
                  <ng-container [ngbNavItem]="2" ngbNavItem>
                    <a ngbNavLink [ngClass]="{ 'new-class': isThirdTabVisited }"
                      >Sale</a
                    >
                    <ng-template ngbNavContent>
                      <div class="row justify-content-center">
                        <div class="col-7">
                          <ul class="billing-level">
                            <li>
                              Billing level :
                              <span>{{ this.organization.billingLevel }}</span>
                            </li>
                          </ul>
                        </div>
                      </div>

                      <div class="clearfix"></div>
                      <form #sale="ngForm" [formGroup]="formgroup">
                        <div class="row mt-20 justify-content-center">
                          <div class="col-4 text-start">
                            <label for="">Order ID</label>
                            <input
                              type="text"
                              class="form-control text-start"
                              name="orderId"
                              value="{{ this.orderId }}"
                              readonly
                              disabled
                            />
                          </div>
                          <div class="col-4 text-start">
                            <label for="">Type of Product</label>
                            <input
                              type="text"
                              placeholder="Gold"
                              class="form-control text-start"
                              name="type_sale"
                              value="{{ this.organization.typeOfProduct }}"
                              readonly
                              disabled
                            />
                          </div>
                          <div class="col-4 text-start">
                            <label for="">Application Service Provider</label>
                            <app-input-dropdown
                              [formGroup]="formgroup"
                              [name]="'serviceProvider'"
                              [object]="this.serviceProviders"
                              [key]="'serviceProviderName'"
                              [value]="'id'"
                            >
                            </app-input-dropdown>
                          </div>
                        </div>
                        <div class="row mt-20 justify-content-center">
                          <div class="col-4 text-start">
                            <label for="">Fee Per Entity</label>
                            <app-input-text
                              [formGroup]="formgroup"
                              [name]="'feePerEntity'"
                              (change)="getTotalFee()"
                              [placeholder]="'$'"
                            ></app-input-text>
                          </div>
                          <div class="col-4 text-start">
                            <label for="">Fee Per User</label>
                            <app-input-text
                              [formGroup]="formgroup"
                              [name]="'feePerUser'"
                              (change)="getTotalFee()"
                              [placeholder]="'$'"
                            ></app-input-text>
                          </div>
                          <div class="col-4 text-start">
                            <label for="">Total Fee</label>
                            <input
                              type="text"
                              class="form-control text-start"
                              name="orderId"
                              value="{{ this.totalFee }}"
                              readonly
                              disabled
                            />
                          </div>
                        </div>
                        <div class="row mt-20 justify-content-center">
                          <div class="col-3">
                            <button
                              class="btn btn-save btn-primary"
                              [disabled]="active === 3"
                              (click)="nav.select(1); onTabChangeNav(1)"
                            >
                              << Previous
                            </button>
                          </div>
                          <div class="col-3">
                            <button
                              class="btn btn-save btn-primary"
                              [disabled]="active === 3"
                              (click)="nav.select(3); onTabChangeNav(3)"
                            >
                              Next >>
                            </button>
                          </div>
                        </div>
                      </form>
                    </ng-template>
                  </ng-container>
                  <ng-container [ngbNavItem]="3" ngbNavItem>
                    <a
                      ngbNavLink
                      [ngClass]="{ 'new-class': isFourthTabVisited }"
                      >Billing</a
                    >
                    <ng-template ngbNavContent>
                      <div class="row justify-content-center">
                        <div class="col-12 text-center">
                          <ul class="billing-level">
                            <li>
                              Billing level :
                              <span>{{ this.organization.billingLevel }}</span>
                            </li>
                          </ul>
                        </div>
                      </div>
                      <form #billing="ngForm" [formGroup]="formgroup">
                        <div class="row mt-20 justify-content-center">
                          <div class="col-4 text-start">
                            <label for="">Bill Number</label>
                            <input
                              type="text"
                              class="form-control text-start"
                              name="billNumber"
                              value="{{ this.billNumber }}"
                              readonly
                              disabled
                            />
                          </div>
                          <div class="col-4 text-start">
                            <label for="">Billing Frequency </label>
                            <app-input-dropdown
                              [formGroup]="formgroup"
                              [name]="'billingFrequency'"
                              [object]="this.billingFrequency"
                              [key]="'frequency'"
                              [value]="'id'"
                            >
                            </app-input-dropdown>
                          </div>
                          <div class="col-4 text-start">
                            <label for="">Payment Terms</label>
                            <select
                              class="form-control"
                              formControlName="paymentTerm"
                              (change)="calculateDueDate()"
                            >
                              <option value="" disabled>Please Select</option>
                              <option value="30">30</option>
                              <option value="45">45</option>
                              <option value="60">60</option>
                              <option value="90">90</option>
                            </select>
                          </div>
                        </div>
                        <div class="row mt-20 justify-content-center">
                          <div class="col-4 text-start">
                            <label for="">Bill Date</label>
                            <app-input-date
                              [formGroup]="formgroup"
                              [name]="'billDate'"
                              (change)="calculateDueDate()"
                            ></app-input-date>
                          </div>
                          <div class="col-4 text-start">
                            <label for="">Due Date</label>
                            <input
                              type="date"
                              class="form-control text-start"
                              formControlName="dueDate"
                              readonly
                            />
                          </div>
                          <div class="col-4 text-start">
                            <label for="">Fee Per Entity</label>
                            <input
                              type="text"
                              class="form-control text-start"
                              value="{{
                                this.formgroup.get('feePerEntity').value
                              }}"
                              readonly
                              disabled
                            />
                          </div>
                        </div>
                        <div class="row mt-20 justify-content-start">
                          <div class="col-4 text-start">
                            <label for="">Fee Per User</label>
                            <input
                              type="text"
                              class="form-control text-start"
                              value="{{
                                this.formgroup.get('feePerUser').value
                              }}"
                              readonly
                              disabled
                            />
                          </div>
                          <div class="col-4 text-start">
                            <label for="">Total Fee</label>
                            <input
                              type="text"
                              class="form-control text-start"
                              value="{{ this.totalFee }}"
                              readonly
                              disabled
                            />
                          </div>
                        </div>
                        <div class="row mt-20 justify-content-center">
                          <div class="col-12 text-start">
                            <label for="">Remarks</label>
                            <textarea
                              class="form-control text-start h-75"
                              placeholder="Add Remarks Here"
                              formControlName="remarks"
                            ></textarea>
                          </div>
                        </div>

                        <div class="row mt-4 justify-content-center">
                          <div class="col-3">
                            <button
                              class="btn btn-save btn-primary"
                              [disabled]="active === 4"
                              (click)="nav.select(2); onTabChangeNav(2)"
                            >
                              << Previous
                            </button>
                          </div>
                          <div class="col-3">
                            <button
                              class="btn btn-save btn-primary"
                              [disabled]="active === 4"
                              (click)="nav.select(4); onTabChangeNav(4)"
                            >
                              Next >>
                            </button>
                          </div>
                        </div>
                      </form>
                    </ng-template>
                  </ng-container>
                  <ng-container [ngbNavItem]="4" ngbNavItem>
                    <a ngbNavLink [ngClass]="{ 'new-class': isFifthTabVisited }"
                      >Collection</a
                    >
                    <ng-template ngbNavContent>
                      <div class="row justify-content-center">
                        <div class="col-12 text-center">
                          <ul class="billing-level">
                            <li>
                              Billing level :
                              <span>{{ this.organization.billingLevel }}</span>
                            </li>
                          </ul>
                        </div>
                      </div>
                      <form #collection="ngForm" [formGroup]="formgroup">
                        <div class="row mt-20 justify-content-center">
                          <div class="col-4 text-start">
                            <label for="">Bill Number</label>
                            <input
                              type="text"
                              class="form-control text-start"
                              name="billNumber"
                              value="{{ this.billNumber }}"
                              readonly
                              disabled
                            />
                          </div>
                          <div class="col-4 text-start">
                            <label for="">TDS (%)</label>
                            <app-input-text
                              [formGroup]="formgroup"
                              [name]="'tDS'"
                              (change)="getBillAmount()"
                              [placeholder]="'$'"
                            ></app-input-text>
                          </div>
                          <div class="col-4 text-start">
                            <label for="">Bill Amount ($)</label>
                            <input
                              type="text"
                              class="form-control text-start"
                              value="{{ this.billAmount }}"
                              readonly
                              disabled
                            />
                          </div>
                        </div>

                        <div class="row mt-20 justify-content-center">
                          <div class="col-4 text-start">
                            <label for="">Received Amount</label>
                            <app-input-text
                              [formGroup]="formgroup"
                              [name]="'receivedAmount'"
                              [placeholder]="'$'"
                            ></app-input-text>
                          </div>
                          <div class="col-4 text-start">
                            <label for="">Bill Collection Date</label>
                            <app-input-date
                              [formGroup]="formgroup"
                              [name]="'collectionDate'"
                            ></app-input-date>
                          </div>
                          <div class="col-4 text-start">
                            <label for="">NEFT/Check Number</label>
                            <app-input-text
                              [formGroup]="formgroup"
                              [name]="'checkNumber'"
                              [placeholder]="'Enter Check Number'"
                            ></app-input-text>
                          </div>
                        </div>
                        <div class="row mt-20 justify-content-start">
                          <div class="col-4 text-start">
                            <label for="">Bill Status</label>
                            <app-input-dropdown
                              [formGroup]="formgroup"
                              [name]="'billStatus'"
                              [object]="this.billStatus"
                              [key]="'billStatusName'"
                              [value]="'id'"
                            >
                            </app-input-dropdown>
                          </div>
                        </div>

                        <div class="row mt-20 mt-4 justify-content-center">
                          <div class="col-3">
                            <button
                              class="btn btn-save btn-primary"
                              [disabled]="active === 5"
                              (click)="nav.select(3); onTabChangeNav(3)"
                            >
                              << Previous
                            </button>
                          </div>
                          <div class="col-3">
                            <button
                              class="btn btn-save btn-primary"
                              (click)="onSubmit()"
                            >
                              Submit
                            </button>
                          </div>
                        </div>
                      </form>
                    </ng-template>
                  </ng-container>
                </nav>
                <div [ngbNavOutlet]="nav" class="mt-2"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="clearfix"></div>
